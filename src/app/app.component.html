<div class="app">
  <div class="app-container">

    <div class="title-container">
      <h1 class="title">
        {{ title }}
        <span>
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="lucide lucide-clipboard-signature">
            <rect width="8" height="4" x="8" y="2" rx="1" ry="1" />
            <path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5" />
            <path d="M16 4h2a2 2 0 0 1 1.73 1" />
            <path d="M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z" />
            <path d="M8 18h1" />
          </svg>
        </span>
      </h1>
      <div class="title-box">
        <h3 class="title-description">
          ðŸŽ¯ Cadastre seus objetivos pessoais e metas profissionais.
        </h3>
        <button type="button" class="change-btn" (click)="changeTitle()">
          Alterar TitÃºlo
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="lucide lucide-rotate-ccw">
            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
            <path d="M3 3v5h5" />
          </svg>
        </button>
      </div>
    </div>
    <hr class="line">

    <div>
      <form [formGroup]="form">
        <div class="form-task">
          <h1 class="form-title">
            Criar uma nova tarefa
          </h1>

          <div class="form-container">
            <div class="form-box">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-case-upper">
                <path d="m3 15 4-8 4 8" />
                <path d="M4 13h6" />
                <path d="M15 11h4.5a2 2 0 0 1 0 4H15V7h4a2 2 0 0 1 0 4" />
              </svg>

              <input class="input-task" type="text" placeholder="Insira o titÃºlo da tarefa" maxlength="60"
                formControlName="title" required="true" />
            </div>

            <div class="form-btn">
              <button type="button" class="btn-save" (click)="add()" [disabled]="form.invalid">
                Salvar
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  class="lucide lucide-plus">
                  <path d="M5 12h14" />
                  <path d="M12 5v14" />
                </svg>
              </button>
            </div>
          </div>
          <span class="invalid">
            <small *ngIf="form.controls['title'].invalid && !form.controls['title'].pristine">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-alert-triangle">
                <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" />
                <path d="M12 9v4" />
                <path d="M12 17h.01" />
              </svg>
              Este campo deve conter entre 5 e 60 caracteres
            </small>
          </span>
        </div>
      </form>
    </div>

    <div class="bat-img" *ngIf="tasks.length == 0">
      <p>
        Shhhh ... parece que vocÃª nÃ£o possui nenhuma tarefa.
      </p>
      <img src="../assets/sleeping.svg" alt="Sleeping bat">
    </div>

    <div class="table-container" *ngIf="tasks.length > 0">
      <div class="table-box">
        <table class="table-content">
          <thead>
            <tr>
              <th>
                <span class="th-items">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-fingerprint">
                    <path d="M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4" />
                    <path d="M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2" />
                    <path d="M17.29 21.02c.12-.6.43-2.3.5-3.02" />
                    <path d="M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4" />
                    <path d="M8.65 22c.21-.66.45-1.32.57-2" />
                    <path d="M14 13.12c0 2.38 0 6.38-1 8.88" />
                    <path d="M2 16h.01" />
                    <path d="M21.8 16c.2-2 .131-5.354 0-6" />
                    <path d="M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2" />
                  </svg>
                  ID
                </span>
              </th>
              <th>
                <span class="th-items">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flag"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" x2="4" y1="22" y2="15"/></svg>
                  Tarefa
                </span>
              </th>
              <th>
                <span class="th-items">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                  Status
                </span>
              </th>
              <th>
                <span class="th-items">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pencil"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg>
                  AÃ§Ãµes
                </span>
              </th>
            </tr>
          </thead>

          <tbody *ngFor="let task of tasks">
            <tr>
              <td class="tb-body">
                <div class="table-letter">
                  <p>
                    {{ task.id}}
                  </p>
                </div>
              </td>

              <td class="tb-body">
                <div class="table-letter">
                  <p>
                    {{ task.task}}
                  </p>
                </div>
              </td>

              <td class="tb-body">
                <div class="status-content">
                  <span class="status-box"
                    [ngStyle]="{'background-color': getStatusColor(task.status), 'border-radius': '9999px', 'color': '#012a4a'}">
                    <span class="status" [ngStyle]="{'background-color': getStatusColor(task.status)}"></span>
                    <span style="position: relative;">
                      {{ task.status }}
                    </span>
                  </span>
                </div>
              </td>

              <td class="tb-body">
                <div class="table-buttons">
                  <button class="check-btn" *ngIf="!task.done" (click)="markDone(task)" title="Finalizar tarefa">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                      class="lucide lucide-check-square">
                      <path d="m9 11 3 3L22 4" />
                      <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
                    </svg>
                  </button>

                  <button class="undo-btn" *ngIf="task.done" (click)="markUndone(task)" title="Refazer tarefa">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard-paste"><path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/></svg>
                  </button>

                  <div class="divisor"></div>
                  <button class="trash-btn" (click)="remove(task)" title="Excluir tarefa">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                      class="lucide lucide-trash">
                      <path d="M3 6h18" />
                      <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
                      <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
                    </svg>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>